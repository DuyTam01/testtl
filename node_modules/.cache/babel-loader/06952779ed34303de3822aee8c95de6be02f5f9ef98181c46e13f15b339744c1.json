{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from \"axios\";\nconst initialState = {\n  products: [],\n  currentPage: 1,\n  totalPage: 5,\n  status: \"start\",\n  error: null\n};\nconst url = \"https://66a07b197053166bcabb88dd.mockapi.io/products\";\nexport const fetchProduct = createAsyncThunk(\"products/fetchProduct\", async page => {\n  const res = await axios.get(`${url}?page=${page}&&limit=12`);\n  // console.log(res.data)\n  return res.data;\n});\nexport const deleteProduct = createAsyncThunk(\"products/deleteProduct\", async productId => {\n  await axios.delete(`${url}/${productId}`);\n  return productId; // Trả về productId để có thể cập nhật state\n});\nconst productsSlice = createSlice({\n  name: \"products\",\n  initialState,\n  reducers: {},\n  extraReducers: builder => {\n    builder.addCase(fetchProduct.pending, state => {\n      state.status = \"loading\";\n    }).addCase(deleteProduct.fulfilled, (state, action) => {\n      // Cập nhật state để loại bỏ sản phẩm đã xóa\n      state.items = state.items.filter(item => item.id !== action.payload);\n    }).addCase(fetchProduct.fulfilled, (state, action) => {\n      state.status = \"start\";\n      state.products = action.payload;\n    }).addCase(fetchProduct.rejected, (state, action) => {\n      state.status = \"failed\";\n      state.error = action.error.message;\n    });\n  }\n});\nexport default productsSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","initialState","products","currentPage","totalPage","status","error","url","fetchProduct","page","res","get","data","deleteProduct","productId","delete","productsSlice","name","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","items","filter","item","id","payload","rejected","message","reducer"],"sources":["C:/Users/ADMIN/Desktop/JAVA/test/test-app/src/redux/productSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'\nimport axios from \"axios\"\n\nconst initialState={\n    products:[],\n    currentPage:1,\n    totalPage:5,\n    status:\"start\",\n    error:null\n}\n\nconst url = \"https://66a07b197053166bcabb88dd.mockapi.io/products\"\n\nexport const fetchProduct = createAsyncThunk(\"products/fetchProduct\", async(page)=>{\n    const res = await axios.get(`${url}?page=${page}&&limit=12`)\n    // console.log(res.data)\n    return res.data\n})\n\nexport const deleteProduct = createAsyncThunk(\"products/deleteProduct\", async (productId) => {\n    await axios.delete(`${url}/${productId}`);\n    return productId; // Trả về productId để có thể cập nhật state\n});\n\n\nconst productsSlice = createSlice({\n    name:\"products\",\n    initialState,\n    reducers:{},\n    extraReducers:(builder)=>{\n        builder\n        .addCase(fetchProduct.pending, state=>{\n            state.status=\"loading\"\n        })\n\n        .addCase(deleteProduct.fulfilled, (state, action) => {\n            // Cập nhật state để loại bỏ sản phẩm đã xóa\n            state.items = state.items.filter(item => item.id !== action.payload);\n        })\n\n        .addCase(fetchProduct.fulfilled,(state,action)=>{\n            state.status=\"start\"\n            state.products=action.payload\n        })\n        .addCase(fetchProduct.rejected,(state,action)=>{\n            state.status=\"failed\"\n            state.error=action.error.message\n        })\n    }\n})\nexport default productsSlice.reducer"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,WAAW,QAAQ,kBAAkB;AAChE,OAAOC,KAAK,MAAM,OAAO;AAEzB,MAAMC,YAAY,GAAC;EACfC,QAAQ,EAAC,EAAE;EACXC,WAAW,EAAC,CAAC;EACbC,SAAS,EAAC,CAAC;EACXC,MAAM,EAAC,OAAO;EACdC,KAAK,EAAC;AACV,CAAC;AAED,MAAMC,GAAG,GAAG,sDAAsD;AAElE,OAAO,MAAMC,YAAY,GAAGV,gBAAgB,CAAC,uBAAuB,EAAE,MAAMW,IAAI,IAAG;EAC/E,MAAMC,GAAG,GAAG,MAAMV,KAAK,CAACW,GAAG,CAAC,GAAGJ,GAAG,SAASE,IAAI,YAAY,CAAC;EAC5D;EACA,OAAOC,GAAG,CAACE,IAAI;AACnB,CAAC,CAAC;AAEF,OAAO,MAAMC,aAAa,GAAGf,gBAAgB,CAAC,wBAAwB,EAAE,MAAOgB,SAAS,IAAK;EACzF,MAAMd,KAAK,CAACe,MAAM,CAAC,GAAGR,GAAG,IAAIO,SAAS,EAAE,CAAC;EACzC,OAAOA,SAAS,CAAC,CAAC;AACtB,CAAC,CAAC;AAGF,MAAME,aAAa,GAAGjB,WAAW,CAAC;EAC9BkB,IAAI,EAAC,UAAU;EACfhB,YAAY;EACZiB,QAAQ,EAAC,CAAC,CAAC;EACXC,aAAa,EAAEC,OAAO,IAAG;IACrBA,OAAO,CACNC,OAAO,CAACb,YAAY,CAACc,OAAO,EAAEC,KAAK,IAAE;MAClCA,KAAK,CAAClB,MAAM,GAAC,SAAS;IAC1B,CAAC,CAAC,CAEDgB,OAAO,CAACR,aAAa,CAACW,SAAS,EAAE,CAACD,KAAK,EAAEE,MAAM,KAAK;MACjD;MACAF,KAAK,CAACG,KAAK,GAAGH,KAAK,CAACG,KAAK,CAACC,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,EAAE,KAAKJ,MAAM,CAACK,OAAO,CAAC;IACxE,CAAC,CAAC,CAEDT,OAAO,CAACb,YAAY,CAACgB,SAAS,EAAC,CAACD,KAAK,EAACE,MAAM,KAAG;MAC5CF,KAAK,CAAClB,MAAM,GAAC,OAAO;MACpBkB,KAAK,CAACrB,QAAQ,GAACuB,MAAM,CAACK,OAAO;IACjC,CAAC,CAAC,CACDT,OAAO,CAACb,YAAY,CAACuB,QAAQ,EAAC,CAACR,KAAK,EAACE,MAAM,KAAG;MAC3CF,KAAK,CAAClB,MAAM,GAAC,QAAQ;MACrBkB,KAAK,CAACjB,KAAK,GAACmB,MAAM,CAACnB,KAAK,CAAC0B,OAAO;IACpC,CAAC,CAAC;EACN;AACJ,CAAC,CAAC;AACF,eAAehB,aAAa,CAACiB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}