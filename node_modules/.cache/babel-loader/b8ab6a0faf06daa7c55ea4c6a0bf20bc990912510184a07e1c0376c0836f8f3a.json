{"ast":null,"code":"import React,{useEffect,useRef}from'react';import{useDispatch,useSelector}from'react-redux';import{Link,useLocation,useNavigate}from'react-router-dom';import{Button,Col,Container,Form,FormGroup,Input,Label,Row,Table}from'reactstrap';import{deleteProduct}from'../../redux/productSlice';import emailjs from'@emailjs/browser';import\"../../css/payment.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Payment(){const location=useLocation();// const { items } = useSelector(state => state.cart);\nconst dispatch=useDispatch();const navigate=useNavigate();const items=useSelector(state=>state.cart.items)||[];// Lấy selectedIds từ state nếu nó tồn tại\nconst[selectedIds,sumprice]=location.state?location.state:[];console.log(selectedIds);console.log(sumprice);const deleteItem=()=>{selectedIds.forEach(id=>{dispatch(deleteProduct(id));});};const form=useRef();const sendEmail=e=>{e.preventDefault();emailjs.sendForm('service_2d1ej8f','template_t5gipm8',form.current,{publicKey:'rhIyxFbF5E8iHQxO9'}).then(()=>{console.log('SUCCESS!');},error=>{console.log('FAILED...',error.text);});navigate('/thanks');deleteItem();// window.location.reload(5)\n};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center mt-5  text-danger text-uppercase \",children:/*#__PURE__*/_jsx(\"strong\",{children:\"Purchase information\"})}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{xs:\"7\",children:/*#__PURE__*/_jsxs(\"form\",{ref:form,onSubmit:sendEmail,children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"text\",type:\"text\",name:\"user_name\",placeholder:\"Le Duy Tam\",required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"text\",type:\"email\",name:\"user_email\",placeholder:\"example@gmail.com\",required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Phone Number::\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"text\",type:\"phone\",name:\"user_phoneNumer\",placeholder:\"0xxxxxxxxx\",required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"Address:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{id:\"text\",type:\"address\",name:\"user_address\",placeholder:\"135 Hai Ba Trung Street\",required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Send\"})]})}),/*#__PURE__*/_jsxs(Col,{xs:\"5\",children:[/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:selectedIds.map(id=>{// Lọc các item dựa trên selectedIds\nconst filteredItems=items.filter(item=>item.id===id);return filteredItems.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"img\",{src:item.link,alt:item.productDisplayName,style:{width:'50px',height:'50px'}})}),/*#__PURE__*/_jsx(\"td\",{children:item.productDisplayName}),/*#__PURE__*/_jsx(\"td\",{children:item.price})]},item.id));})})]}),selectedIds.length!==0&&/*#__PURE__*/_jsxs(\"h5\",{children:[\"Total: \",/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",sumprice]})]})]})]})]})});}","map":{"version":3,"names":["React","useEffect","useRef","useDispatch","useSelector","Link","useLocation","useNavigate","Button","Col","Container","Form","FormGroup","Input","Label","Row","Table","deleteProduct","emailjs","jsx","_jsx","jsxs","_jsxs","Payment","location","dispatch","navigate","items","state","cart","selectedIds","sumprice","console","log","deleteItem","forEach","id","form","sendEmail","e","preventDefault","sendForm","current","publicKey","then","error","text","children","className","xs","ref","onSubmit","type","name","placeholder","required","value","map","filteredItems","filter","item","index","src","link","alt","productDisplayName","style","width","height","price","length"],"sources":["C:/Users/ADMIN/Desktop/JAVA/test/test-app/src/components/payment/Payment.js"],"sourcesContent":["import React, {  useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\nimport { Button, Col, Container, Form, FormGroup, Input, Label, Row, Table } from 'reactstrap';\nimport { deleteProduct } from '../../redux/productSlice';\nimport emailjs from '@emailjs/browser';\nimport \"../../css/payment.css\"\n\nexport default function Payment() {\n  const location = useLocation();\n  // const { items } = useSelector(state => state.cart);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const items = useSelector(state => state.cart.items) || []\n  // Lấy selectedIds từ state nếu nó tồn tại\n  const [selectedIds, sumprice] = location.state ? location.state : [];\n  console.log(selectedIds);\n  console.log(sumprice);\n  const deleteItem = () => {\n    selectedIds.forEach(id => {\n      dispatch(deleteProduct(id));\n    });\n\n  };\n  \n  const form = useRef();\n  const sendEmail = (e) => {\n    e.preventDefault();\n    emailjs\n      .sendForm('service_2d1ej8f', 'template_t5gipm8', form.current, {\n        publicKey: 'rhIyxFbF5E8iHQxO9',\n      })\n      .then(\n        () => {\n          console.log('SUCCESS!');\n        },\n        (error) => {\n          console.log('FAILED...', error.text);\n        },\n      );\n    navigate('/thanks');\n    deleteItem()\n    // window.location.reload(5)\n  }\n\n  return (\n    <div>\n      <Container>\n        < h1 className='text-center mt-5  text-danger text-uppercase '>\n          <strong>Purchase information</strong>\n        </h1>\n        <Row>\n          <Col xs=\"7\">\n            <form ref={form} onSubmit={sendEmail}>\n              <label>Name:</label><br />\n              <input id='text' type=\"text\" name=\"user_name\" placeholder=\"Le Duy Tam\" required/><br />\n              <label>Email:</label><br />\n              <input id='text' type=\"email\" name=\"user_email\" placeholder=\"example@gmail.com\" required/><br />\n              <label>Phone Number::</label><br />\n              <input id='text' type=\"phone\" name=\"user_phoneNumer\" placeholder=\"0xxxxxxxxx\" required/><br />\n              <label>Address:</label><br />\n              <input id='text' type=\"address\" name=\"user_address\" placeholder=\"135 Hai Ba Trung Street\" required /><br /><br />\n              <input type=\"submit\" value=\"Send\" />\n            </form>\n          </Col>\n          <Col xs=\"5\">\n            <Table>\n              <thead>\n                <tr>\n                  <th></th>\n                  <th>Name</th>\n                  <th>Price</th>\n                </tr>\n              </thead>\n              <tbody>\n                {\n                  selectedIds.map(id => {\n                    // Lọc các item dựa trên selectedIds\n                    const filteredItems = items.filter(item => item.id === id);\n                    return filteredItems.map((item, index) => (\n                      <tr key={item.id}>\n                        <td>\n                          <img src={item.link} alt={item.productDisplayName} style={{ width: '50px', height: '50px' }} />\n                        </td>\n                        <td>{item.productDisplayName}</td>\n                        <td>{item.price}</td>\n                      </tr>\n                    ));\n                  })\n                }\n              </tbody>\n            </Table>\n            {selectedIds.length !== 0 && <h5>Total: <span>${sumprice}</span></h5>}\n          </Col>\n        </Row>\n      </Container>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}