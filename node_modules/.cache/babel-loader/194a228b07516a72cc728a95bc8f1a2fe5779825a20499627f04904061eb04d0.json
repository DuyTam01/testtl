{"ast":null,"code":"import{createAsyncThunk,createSlice}from'@reduxjs/toolkit';import axios from\"axios\";const initialState={products:[],currentPage:1,totalPage:5,status:\"start\",error:null};const url=\"https://66a07b197053166bcabb88dd.mockapi.io/products\";export const fetchProduct=createAsyncThunk(\"products/fetchProduct\",async page=>{const res=await axios.get(`${url}?page=${page}&&limit=12`);// console.log(res.data)\nreturn res.data;});export const deleteProduct=createAsyncThunk(\"products/deleteProduct\",async productId=>{await axios.delete(`${url}/${productId}`);return productId;// Trả về productId để có thể cập nhật state\n});const productsSlice=createSlice({name:\"products\",initialState,reducers:{},extraReducers:builder=>{builder.addCase(fetchProduct.pending,state=>{state.status=\"loading\";}).addCase(deleteProduct.fulfilled,(state,action)=>{// Cập nhật state để loại bỏ sản phẩm đã xóa\nstate.items=state.items.filter(item=>item.id!==action.payload);}).addCase(fetchProduct.fulfilled,(state,action)=>{state.status=\"start\";state.products=action.payload;}).addCase(fetchProduct.rejected,(state,action)=>{state.status=\"failed\";state.error=action.error.message;});}});export default productsSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","initialState","products","currentPage","totalPage","status","error","url","fetchProduct","page","res","get","data","deleteProduct","productId","delete","productsSlice","name","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","items","filter","item","id","payload","rejected","message","reducer"],"sources":["C:/Users/ADMIN/Desktop/JAVA/test/test-app/src/redux/productSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit'\nimport axios from \"axios\"\n\nconst initialState={\n    products:[],\n    currentPage:1,\n    totalPage:5,\n    status:\"start\",\n    error:null\n}\n\nconst url = \"https://66a07b197053166bcabb88dd.mockapi.io/products\"\n\nexport const fetchProduct = createAsyncThunk(\"products/fetchProduct\", async(page)=>{\n    const res = await axios.get(`${url}?page=${page}&&limit=12`)\n    // console.log(res.data)\n    return res.data\n})\n\nexport const deleteProduct = createAsyncThunk(\"products/deleteProduct\", async (productId) => {\n    await axios.delete(`${url}/${productId}`);\n    return productId; // Trả về productId để có thể cập nhật state\n});\n\n\nconst productsSlice = createSlice({\n    name:\"products\",\n    initialState,\n    reducers:{},\n    extraReducers:(builder)=>{\n        builder\n        .addCase(fetchProduct.pending, state=>{\n            state.status=\"loading\"\n        })\n\n        .addCase(deleteProduct.fulfilled, (state, action) => {\n            // Cập nhật state để loại bỏ sản phẩm đã xóa\n            state.items = state.items.filter(item => item.id !== action.payload);\n        })\n\n        .addCase(fetchProduct.fulfilled,(state,action)=>{\n            state.status=\"start\"\n            state.products=action.payload\n        })\n        .addCase(fetchProduct.rejected,(state,action)=>{\n            state.status=\"failed\"\n            state.error=action.error.message\n        })\n    }\n})\nexport default productsSlice.reducer"],"mappings":"AAAA,OAASA,gBAAgB,CAAEC,WAAW,KAAQ,kBAAkB,CAChE,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,YAAY,CAAC,CACfC,QAAQ,CAAC,EAAE,CACXC,WAAW,CAAC,CAAC,CACbC,SAAS,CAAC,CAAC,CACXC,MAAM,CAAC,OAAO,CACdC,KAAK,CAAC,IACV,CAAC,CAED,KAAM,CAAAC,GAAG,CAAG,sDAAsD,CAElE,MAAO,MAAM,CAAAC,YAAY,CAAGV,gBAAgB,CAAC,uBAAuB,CAAE,KAAM,CAAAW,IAAI,EAAG,CAC/E,KAAM,CAAAC,GAAG,CAAG,KAAM,CAAAV,KAAK,CAACW,GAAG,CAAC,GAAGJ,GAAG,SAASE,IAAI,YAAY,CAAC,CAC5D;AACA,MAAO,CAAAC,GAAG,CAACE,IAAI,CACnB,CAAC,CAAC,CAEF,MAAO,MAAM,CAAAC,aAAa,CAAGf,gBAAgB,CAAC,wBAAwB,CAAE,KAAO,CAAAgB,SAAS,EAAK,CACzF,KAAM,CAAAd,KAAK,CAACe,MAAM,CAAC,GAAGR,GAAG,IAAIO,SAAS,EAAE,CAAC,CACzC,MAAO,CAAAA,SAAS,CAAE;AACtB,CAAC,CAAC,CAGF,KAAM,CAAAE,aAAa,CAAGjB,WAAW,CAAC,CAC9BkB,IAAI,CAAC,UAAU,CACfhB,YAAY,CACZiB,QAAQ,CAAC,CAAC,CAAC,CACXC,aAAa,CAAEC,OAAO,EAAG,CACrBA,OAAO,CACNC,OAAO,CAACb,YAAY,CAACc,OAAO,CAAEC,KAAK,EAAE,CAClCA,KAAK,CAAClB,MAAM,CAAC,SAAS,CAC1B,CAAC,CAAC,CAEDgB,OAAO,CAACR,aAAa,CAACW,SAAS,CAAE,CAACD,KAAK,CAAEE,MAAM,GAAK,CACjD;AACAF,KAAK,CAACG,KAAK,CAAGH,KAAK,CAACG,KAAK,CAACC,MAAM,CAACC,IAAI,EAAIA,IAAI,CAACC,EAAE,GAAKJ,MAAM,CAACK,OAAO,CAAC,CACxE,CAAC,CAAC,CAEDT,OAAO,CAACb,YAAY,CAACgB,SAAS,CAAC,CAACD,KAAK,CAACE,MAAM,GAAG,CAC5CF,KAAK,CAAClB,MAAM,CAAC,OAAO,CACpBkB,KAAK,CAACrB,QAAQ,CAACuB,MAAM,CAACK,OAAO,CACjC,CAAC,CAAC,CACDT,OAAO,CAACb,YAAY,CAACuB,QAAQ,CAAC,CAACR,KAAK,CAACE,MAAM,GAAG,CAC3CF,KAAK,CAAClB,MAAM,CAAC,QAAQ,CACrBkB,KAAK,CAACjB,KAAK,CAACmB,MAAM,CAACnB,KAAK,CAAC0B,OAAO,CACpC,CAAC,CAAC,CACN,CACJ,CAAC,CAAC,CACF,cAAe,CAAAhB,aAAa,CAACiB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}